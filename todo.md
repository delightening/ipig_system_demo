# 豬博士 iPig 系統 - 待辦功能清單

> **最後更新：** 2026-01-11

## ✅ v1.0 MVP - 已完成

### 共用基礎架構
- [x] 認證系統（JWT 登入、登出、Token 刷新）
- [x] 密碼管理（忘記密碼、重設密碼、強制變更）
- [x] 使用者管理（CRUD、角色指派）
- [x] 角色權限管理（RBAC）
- [x] Email 服務（帳號開通、密碼重設）
- [x] 稽核紀錄

### iPig ERP (進銷存管理系統)
- [x] 倉庫、產品、SKU 管理
- [x] 供應商/客戶管理
- [x] 採購流程（PO → GRN → PR）
- [x] 銷售流程（SO → DO → SR）
- [x] 倉儲作業（調撥、盤點、調整）
- [x] 報表（庫存現況、流水、明細、成本）

### AUP 審查系統
- [x] 計畫書 CRUD
- [x] 狀態機（12 種狀態）
- [x] 審查流程基本功能
- [x] 我的計劃（外部使用者）
- [x] 審查意見管理（列出、新增、標記解決）
- [x] 審查人員指派（指派對話框、指派清單）
- [x] 版本內容檢視對話框
- [x] 附件管理前端 UI

### 實驗動物管理系統
- [x] 豬隻管理（列表、新增、編輯、詳情）
- [x] 依狀態篩選、依欄位分組檢視
- [x] 批次分配至計劃、批次進入實驗
- [x] 匯入基本資料（Excel/CSV 支援、資料驗證、批次匯入）
- [x] 匯入體重資料（Excel/CSV 支援、資料驗證、批次匯入）
- [x] 下載匯入範本（Excel 格式）
- [x] 下載匯入範本（CSV 格式）
- [x] 匯入批次記錄與錯誤追蹤
- [x] 觀察試驗紀錄完整表單（含用藥、儀器、照片上傳）
- [x] 手術紀錄完整表單（含麻醉、生理數值、術後給藥）
- [x] 複製紀錄功能
- [x] 版本歷史檢視
- [x] 獸醫師已讀標記、獸醫師建議
- [x] 體重、疫苗、犧牲、病理報告紀錄
- [x] 資料匯出（病歷、各類紀錄）
- [x] 豬隻來源管理

### 通知系統
- [x] 站內通知系統（Header 圖示、下拉選單）
- [x] 未讀數量顯示
- [x] 標記已讀、全部已讀

---

## 📋 v1.1 規劃功能

### 通知系統
- [x] 排程通知任務（低庫存、效期提醒背景排程）
- [x] 計畫狀態變更 Email 通知
- [x] 審查指派 Email 通知
- [x] 獸醫師建議 Email 通知

### 基礎架構
- [x] 檔案上傳後端實作（檔案儲存服務）
- [x] 資料匯入功能（Excel/CSV 支援、資料驗證、批次匯入）
- [x] CSV 範本下載功能
- [x] 豬隻編輯功能 - 新增 entry_date 欄位支援
- [x] 列表頁快速編輯功能 - 在進場日期旁添加編輯按鈕
- [] protocol 提交有錯誤

### 本機開發
- [x] Rust 端資料庫連線重試機制（啟動時自動重試連線，適用於 Docker Compose 環境）
- [x] Docker 資料庫 healthcheck 優化
- [x] API 啟動失敗時明確的資料庫狀態日誌

---

## 📋 v2.0 規劃功能

### iPig ERP 系統
- [ ] 條碼掃描功能（行動裝置支援）
- [x] Excel/CSV 匯入匯出（實驗動物管理系統已完整實作）
- [ ] 進階成本法（FIFO）
- [ ] 批號效期到期提醒進階設定
- [ ] 作廢已核准單據：沖銷機制（Reversal Document）
- [ ] 庫位管理（Bin Location）
- [ ] 與會計/ERP API 對接

### AUP 審查系統
- [ ] 後端 PDF 產生端點
- [ ] 前端 TypeScript 型別統一
- [ ] 版本比較功能

### 實驗動物管理
- [ ] 疼痛評估紀錄時間軸檢視
- [ ] 獸醫師建議通知機制進階設定

### 使用者體驗
- [x] 通知偏好設定
- [ ] 行動端響應式設計

---

## 變更紀錄

| 日期 | 內容 |
|------|------|
| 2026-01-11 | 完整實作資料匯入功能（Excel/CSV 支援、資料驗證、批次匯入、CSV 範本下載） |
| 2026-01-09 | AUP 審查系統 UI 完善（審查意見、指派、附件、版本檢視） |
| 2026-01-08 | v1.0 MVP 完成，更新 v1.1、v2.0 規劃 |
